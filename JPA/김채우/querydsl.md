# QueryDSL

---

> JPQL을 문자열이 아닌 자바 코드로 작성해 쿼리를 만드는 라이브러리

---
# 1. JPQL과의 관계
JPQL은 엔티티를 대상으로 하는 객체지향 쿼리 언어
JPQL은 보통 문자열로 작성하기 때문에 오타/문법 오류를 컴파일 시점에 잡기 어렵고 런타임에 터질 수 있음
QueryDSL은 해당 문제를 줄이기 위해 JPQL을 코드로 작성하는 빌더 역할
메타모델(Q 클래스)을 기반으로 타입 안정성 제공
  
---
# 2. 장점
## 2.1. 타입 안정성
엔티티 필드명을 문자열로 쓰지 않음
따라서 오타가 나면 컴파일 단계에서 잡힘
## 2.2. 동적 쿼리 가독성
if/조건 조합이 많아질수록 JPQL 문자열 조합보다 QueryDSL 체이닝이 유지보수에 유리
## 2.3. 복잡한 쿼리 표현력
조인/정렬/페이징 같은 구성이 코드로 드러나 읽기 쉬움

---
# 3. 동작 원리
빌드 시점에 엔티티를 보고 `QMember`, `QTeam`과 같은 Q 클래스(메타모델) 생성
이를 이용해 조건을 조합
필드 접근이 코드로 표현되어 문자열 JPQL보다 실수를 줄일 수 있음
```java
QMember m = QMember.member;

List<Member> result = queryFactory
    .selectFrom(m)
    .where(m.age.gt(18))
    .fetch();
```

---
# 4. 언제 사용할까
검색 조건이 여러개(필터/정렬/페이징)이고 조합이 많아 [[동적 쿼리]]가 필요할 때
단순 조회 몇 개 수준이면 Spring Data JPA 쿼리 메소드나 짧은 JPQL로도 충분
오히려 QueryDSL을 붙이려면 커스텀 리포지토리 구성 등 초기 셋업이 번거로울수도

---
# 내가 생각한 한 줄 정의
>[!info]
>동적 쿼리를 보다 간편하고 직관적으로 작성하게 해 주는 놈
